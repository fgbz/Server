<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="phalaenopsis.lawcase.dao.ISignDao">

	<select id="getSignCount" resultType="int">
		select count(1) from
		SS_SIGN t where t.instanceid = #{caseID}
		and t.templateid = #{signLinkID} and t.signednode = #{node}
	</select>

	<insert id="saveSign" parameterType="Signature">
		insert into SS_SIGN(
		<if test="nodeStatus!=null and nodeStatus!=''">
			NODESTATUS,
		</if>
		<if test="status!=null and status !=''">
			STATUS,
		</if>
		<if test="operateTime!=null and operateTime !=''">
			OPERATETIME,
		</if>
		<if test="signedUserID!=null and signedUserID !=''">
			SIGNEDUSERID,
		</if>
		<if test="sendBackReason!=null and sendBackReason !=''">
			SENDBACKREASON,
		</if>
		<if test="isSendBack!=null and isSendBack !=''">
			ISSENDBACK,
		</if>
		<if test="idea!=null and idea !=''">
			IDEA,
		</if>
		<if test="signDate!=null and signDate !=''">
			SIGNDATE,
		</if>
		<if test="signedUser!=null and signedUser !=''">
			SIGNEDUSER,
		</if>
		<if test="signedNode!=null and signedNode !=''">
			SIGNEDNODE,
		</if>
		<if test="InstanceID!=null and  InstanceID !=''">
			INSTANCEID,
		</if>
		<if test="templateID !=null and templateID !=''">
			TEMPLATEID,
		</if>
			ID
		)
		values (
		<if test="nodeStatus!=null and nodeStatus!=''">
			#{nodeStatus},
		</if>
		<if test="status!=null and status !=''">
			#{status},
		</if>
		<if test="operateTime!=null and operateTime !=''">
			#{operateTime},
		</if>
		<if test="signedUserID!=null and signedUserID !=''">
			#{signedUserID},
		</if>
		<if test="sendBackReason!=null and sendBackReason !=''">
			#{sendBackReason},
		</if>
		<if test="isSendBack!=null and isSendBack !=''">
			#{isSendBack},
		</if>
		<if test="idea!=null and idea !=''">
			#{idea},
		</if>
		<if test="signDate!=null and signDate !=''">
			#{signDate},
		</if>
		<if test="signedUser!=null and signedUser !=''">
			#{signedUser},
		</if>
		<if test="signedNode!=null and signedNode !=''">
			#{signedNode},
		</if>
		<if test="InstanceID!=null and  InstanceID !=''">
			#{InstanceID},
		</if>
		<if test="templateID !=null and templateID !=''">
			#{templateID},
		</if>
			#{id}
		)
	</insert>

</mapper>